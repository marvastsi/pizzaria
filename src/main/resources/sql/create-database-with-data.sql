create table pizza (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
    name VARCHAR(64) NOT NULL,
    price DECIMAL(14,2) NOT NULL
);

insert into pizza (name, price) values ('Paulista', 36.00);
insert into pizza (name, price) values ('Mussarela', 32.00);
insert into pizza (name, price) values ('Calabresa', 33.00);
insert into pizza (name, price) values ('Atum', 35.00);
insert into pizza (name, price) values ('Picanha', 50.00);
 
-- creating user and user_authority tables
CREATE TABLE user (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
    username VARCHAR(64) NOT NULL, 
	password VARCHAR(64) NOT NULL,
	firstname VARCHAR(64) NOT NULL,
	lastname VARCHAR(64) NOT NULL,
	CONSTRAINT uq_user_login UNIQUE (username)
);
  
CREATE TABLE user_authority (
	user_id INTEGER NOT NULL,
	authority_id VARCHAR(64) NOT NULL,
	PRIMARY KEY (user_id, authority_id)
);

CREATE TABLE authority (
    id VARCHAR(64) NOT NULL,
    description VARCHAR(256),
    PRIMARY KEY (id)
);

-- inserindo papeis
insert into authority values ('USER', 'Acesso ao cadastro de pizzas');
insert into authority values ('ADMIN', 'Acesso ao cadastro de usuários');

-- inserindo usuarios
insert into user (username, password, firstname, lastname) values ('willian', 'willian', 'Willian', 'Fuertes Batista');
insert into user (username, password, firstname, lastname) values ('flavia', 'flavia', 'Flavia', 'Pondian');

-- inserindo papeis ao usuarios
insert into user_authority values ((select id from user where username = 'willian'), 'USER');
insert into user_authority values ((select id from user where username = 'willian'), 'ADMIN');
insert into user_authority values ((select id from user where username = 'flavia'), 'USER');